<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add-on Store | NG Extension Manager</title>
    <meta name="description" content="Browse, find, sort, customize, and get installation instructions for NG Extension Manager Add-ons.">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="../css/addon_store.css">
    <link rel="stylesheet" href="../../public/fonts/fonts.css">
</head>
<body>
    <div class="page-wrapper">
        <aside class="sidebar">
            <header class="sidebar-header">
                <img src="../../public/icons/svg/updatelogo.svg" alt="NG Extension Manager Logo" class="header-logo no-mask">
                <h1 id="extension-title" class="sidebar-title">Add-on Store</h1>
            </header>
            <nav class="sidebar-nav" aria-label="Main Sections">
                <ul>
                    <li>
                        <button class="sidebar-button" data-panel-target="panel-status">
                            <span class="icon icon-info" aria-hidden="true"></span> <span>Status</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-button active" data-panel-target="panel-addon-store" aria-current="page">
                            <span class="icon icon-store" aria-hidden="true"></span> <span>Add-on Store</span>
                        </button>
                    </li>
                    <li>
                         <button class="sidebar-button" data-panel-target="panel-advanced">
                            <span class="icon icon-settings" aria-hidden="true"></span>
                            <span>Advanced</span>
                        </button>
                    </li>
                    </ul>
            </nav>
            <footer class="sidebar-footer">
                 <p>&copy; <span id="current-year"></span> NG Extension Manager</p>
            </footer>
        </aside>

        <main class="content-area">

            <section id="panel-status" class="content-panel" hidden aria-labelledby="nav-status" tabindex="-1">
                 <header class="panel-header">
                     <h2><span class="icon icon-info" aria-hidden="true"></span> Service Status</h2>
                     <p>Current status of the Add-on Store service.</p>
                 </header>
                 <div class="panel-content">
                    <div id="service-status-details" class="content-section service-status-details" aria-live="polite">
                        <div class="status-indicator-wrapper" data-status="unknown">
                             <span id="service-status-panel-icon-wrapper"><span class="icon icon-help" id="service-status-panel-icon" aria-hidden="true"></span></span>
                             <span id="service-status-panel-text" class="status-message">Checking status...</span>
                        </div>
                        <p id="service-status-panel-message" class="description">Fetching details...</p>
                        <div class="status-meta">
                            <span class="last-checked" id="service-status-last-checked" title="Time status was last checked">Never checked</span>
                        </div>
                    </div>
                 </div>
             </section>

            <section id="panel-addon-store" class="content-panel active" aria-labelledby="nav-addon-store" tabindex="-1">
                <header class="panel-header addon-store-header">
                    <div class="header-main">
                         <h2><span class="icon icon-store header-icon" aria-hidden="true"></span> Add-on Store</h2>
                         <p>Discover add-ons to enhance your experience.</p>
                     </div>
                    <div id="controls" class="header-controls">
                        <div class="sort-wrapper">
                            <label for="sort-select" class="visually-hidden">Sort Add-ons</label>
                            <select id="sort-select" class="styled-select" title="Sort Add-ons">
                                <option value="name-asc">Name (A-Z)</option>
                                <option value="name-desc">Name (Z-A)</option>
                                </select>
                        </div>
                        <div class="search-wrapper">
                             <label for="search-input" class="visually-hidden">Search Add-ons</label>
                             <span class="icon icon-search search-icon" aria-hidden="true"></span>
                             <input type="search" id="search-input" placeholder="Search add-ons..." aria-label="Search add-ons">
                        </div>
                        <button id="refresh-button" class="btn tertiary icon-btn" aria-label="Refresh add-on list" title="Refresh add-on list">
                            <span class="icon icon-refresh" aria-hidden="true"></span>
                        </button>
                    </div>
                </header>

                <div class="panel-content addon-store-content">
                    <div id="service-status-overlay" class="service-status-overlay content-section" style="display: none;" role="status">
                         <span id="service-status-icon" class="icon" aria-hidden="true"></span>
                         <h3 id="service-status-title" class="section-title">Status</h3>
                         <p id="service-status-message" class="description">Message</p>
                    </div>

                     <div id="addon-list-section" class="content-section">
                         <h3 class="section-title visually-hidden">Available Add-ons</h3>
                         <div id="addon-list" class="addon-grid" aria-live="polite" aria-atomic="false" aria-busy="true">
                            <div class="loading-indicator" style="display: flex;">
                                 <span class="icon icon-spinner loading-spinner" aria-hidden="true"></span> Loading Add-ons...
                             </div>
                             <div class="error-message" style="display: none;">Error loading add-ons.</div>
                             <div class="no-results" style="display: none;">No add-ons found.</div>
                         </div>
                     </div>

                    <nav id="pagination" class="pagination-controls content-section" aria-label="Add-on list pagination">
                        </nav>
                </div>
            </section>

            <section id="panel-advanced" class="content-panel" hidden aria-labelledby="nav-advanced" tabindex="-1">
                 <header class="panel-header">
                     <h2><span class="icon icon-settings" aria-hidden="true"></span> Advanced Settings</h2>
                     <p>Customize the Add-on Store display.</p>
                 </header>
                 <div class="panel-content">
                      <div class="content-section">
                          <h3 class="section-title">Display Settings</h3>
                          <p class="description">Choose which details to show on the add-on cards in the store.</p>
                          <div class="settings-grid">
                               <div class="setting-item">
                                   <input type="checkbox" id="setting-show-version" class="styled-checkbox">
                                   <label for="setting-show-version">Show Version Tag</label>
                               </div>
                               <div class="setting-item">
                                   <input type="checkbox" id="setting-show-author" class="styled-checkbox">
                                   <label for="setting-show-author">Show Author Name</label>
                               </div>
                               <div class="setting-item">
                                   <input type="checkbox" id="setting-show-description" class="styled-checkbox">
                                   <label for="setting-show-description">Show Description</label>
                               </div>
                          </div>
                           <p class="description small-description">Changes are saved automatically and applied when the store list is displayed or refreshed.</p>
                      </div>

                      </div>
            </section>


             <div id="changelog-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="changelog-modal-title" style="display: none;">
                 <div class="modal-content">
                     <button class="modal-close-button" aria-label="Close changelog modal">&times;</button>
                     <h2 id="changelog-modal-title">Changelog: <span id="changelog-modal-addon-name">[Add-on Name]</span></h2>
                     <div class="modal-body">
                         <div id="changelog-content" class="changelog-container markdown-content" aria-busy="false">
                             </div>
                     </div>
                 </div>
             </div>

             <div id="instruction-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="instruction-modal-title" style="display: none;">
                 <div class="modal-content">
                     <button class="modal-close-button" aria-label="Close installation instructions modal">&times;</button>
                     <h2 id="instruction-modal-title">Install: <span id="modal-addon-name">[Add-on Name]</span></h2>
                     <div class="modal-body">
                         <p>To install this add-on:</p>
                         <ol>
                             <li><strong>Open Files:</strong> Go to your NG Extension Manager installation folder.</li>
                             <li><strong>Find 'addons' Folder:</strong> Open the "addons" folder (create if needed).</li>
                             <li><strong>Create Add-on Folder:</strong> Inside "addons", create a new folder (e.g., `my-cool-addon`).</li>
                             <li><strong>Get Files:</strong> Click "Go to Add-on" below. Download `addon.json` and the main `.js` file from GitHub.</li>
                             <li><strong>Place Files:</strong> Move downloaded files into the folder created in step 3.</li>
                             <li><strong>Reload Manager:</strong> Close and reopen the NG Extension Manager app.</li>
                         </ol>
                         <p><strong>Troubleshooting:</strong> Check folder/file names, JSON format, and documentation.</p>
                     </div>
                     <div class="modal-footer">
                         <button id="go-to-addon-button" class="btn secondary">
                             <span class="icon icon-link" aria-hidden="true"></span>
                             <span class="button-text">Go to Add-on on GitHub</span>
                         </button>
                     </div>
                  </div>
             </div>


            <footer class="content-footer" role="contentinfo">
                 <div class="footer-version">Version: <span id="extension-version">N/A</span></div>
                 <div class="footer-links">
                     <a href="https://github.com/Nitra-Global/addons/issues/new" target="_blank" rel="noopener noreferrer" title="Report an issue with an Add-on">
                          <span class="icon icon-bug" aria-hidden="true"></span> Report Issue
                     </a>
                     <a href="https://github.com/Nitra-Global/NG-Extension-Manager/discussions" target="_blank" rel="noopener noreferrer" title="Visit the community forums">
                          <span class="icon icon-forum" aria-hidden="true"></span> Community Forums
                     </a>
                 </div>
            </footer>
        </main>
    </div>

    <div id="toast-container" role="log" aria-live="assertive" aria-relevant="additions"></div>

    <script src="../js/markdown.js"></script> <script src="../js/addon_store.js"></script>
</body>
</html>
